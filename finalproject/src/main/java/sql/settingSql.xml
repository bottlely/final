<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="mars.setting">
	<select id="getMyInfo" parameterType="Integer" resultType="mars.member.model.MemberDTO">
	select * from mars_member where idx=#{idx}
	</select>
	
	<update id="updateMyInfo" parameterType="mars.member.model.MemberDTO">
	update mars_member set name=#{name}, id=#{id}, gender=#{gender}, birth_y=#{birth_y}, birth_m=#{birth_m}, birth_d=#{birth_d}, tel=#{tel}, city=#{city}, favorite_movie=#{favorite_movie}, favorite_sport=#{favorite_sport}, favorite_fashion=#{favorite_fashion}, favorite_beauty=#{favorite_beauty}, favorite_travel=#{favorite_travel}, favorite_music=#{favorite_music}, favorite_dance=#{favorite_dance}, favorite_food=#{favorite_food} where idx=#{idx}
	</update>
	
	<select id="getMyPwd" parameterType="Integer" resultType="String">
	select pwd from mars_member where idx=#{idx}
	</select>
	
	<update id="changePwd" parameterType="HashMap">
	update mars_member set pwd=#{pwd} where idx=#{idx}
	</update>
	
	<delete id="leaveMars" parameterType="Integer">
	delete mars_member where idx=#{idx}
	</delete>
	
	<select id="getFollowingList" parameterType="Integer" resultType="mars.member.model.MemberDTO">
		select mars_member.name, mars_member.idx
		from mars_member, mars_ff
		where mars_member.idx=mars_ff.user1_idx and mars_ff.user2_idx=#{user2_idx}
	</select>
	
	<select id="getGroupList" parameterType="Integer" resultType="mars.friend.model.FriendDTO">
	select * from mars_ff where user2_idx=#{user2_idx}
	</select>
	
	<insert id="sendReport" parameterType="mars.report.model.ReportDTO">
	insert into mars_report values(mars_report_idx.nextval, #{idx_from}, 0, #{content}, #{category}, '', sysdate, 0)
	</insert>
	
	<insert id="addGroup" parameterType="mars.friend.model.FriendDTO">
	insert into mars_ff values(mars_ff_idx.nextval, 0, #{user2_idx}, 1, #{group_name}, 0, 0, 0, '', '')
	</insert>
</mapper>